<html>
<head>
	<title>Final Project Blog</title>
	<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
	<style type="text/css">


        #chart {
            margin-left: 40px;
            height: 506px;
        }

        text {
            font: 10px sans-serif;
        }
        .axis path, .axis line {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
        }
        .tick line {
            stroke: gray;
        }
        .overlay {
            fill: none;
            pointer-events: all;
            cursor: ew-resize;
        }
        
        #topWords {
            margin-left: 40px;
            height: 740px;
        }

        #sentimentTopic {
            margin-left: 40px;
            height: 610px;
        }

        
        #rankPath:hover{
            stroke: black;
            opacity:100%;
            stroke-width: 8;
        }

        .label {
            fill: #777;
        }

        .year.label {
            font: 500 196px "Helvetica Neue";
            fill: #ddd;
        }

        .year.label.active {
            fill: #aaa;
        }

        .overlay {
            fill: none;
            pointer-events: all;
            cursor: ew-resize;
        }
        div.tooltip {   
                position: absolute;                  
                width: 84px;                    
                height: 100px;                   
                padding: 0px 2px 1px 2px;               
                font: 12px sans-serif;      
                background: lightsteelblue; 
                border: 1px;        
                border-radius: 8px;         
                pointer-events: none;  
                line-height: 90%;
                margin: .5cm .5cm .5cm .5cm;         
        }

        #topicTitle {
            text-align: center;
            font-weight: bold;
            line-height: 90%;
            margin: .2cm 0cm 0cm 0cm;
        }

        #sentiment, #topic, #importance {
/*            line-height: 90%;*/
            margin: .2cm .1cm 0cm .1cm;
            font-size: 10px;
        }
        </style>
</head>
<body>
<h1>Blog Post I</h1>
<h2>Initial Idea</h2>
<p>Use the Twitter API to gather data about the positivity and negativity of Donald Trump’s tweets to get a “Twitter approval rating.” We can filter these tweets by time and by location, so our plan initially was to compare Trump’s Twitter approval rating to his actual approval rating by area over time as things changed. We were going to create a D3 map to examine the country, and graphs to look at how his approval rating changed with time.</p>	

<h2>Revised Data</h2>
<p>Our new plan is to create a machine-learning Twitter bot that responds to Trump’s tweets intelligently. Whenever Trump tweets, the bot will analyze the responses to him for the four hours after his tweet from the Twitter public. It will determine the average positivity or negativity of his tweets, and will respond to Trump with a tweet that represents the general Twitter sentiment towards his tweet. We will still examine the positivity and negativity scores by region, so we can make a map of positive and negative responses to his tweets. In addition, we can plot his Twitter favorability over time, and present how Twitter responded to tweets about certain issues. </p>	

<h2>Hypothesis</h2>
<p>Twitter’s userbase is, on average, quite young. As a result, we expect Trump’s Twitter audience to be left-learning, and the general Twitter response to Trump’s tweets, no matter the subject of the tweet, to be quite negative. More specifically, however, we expect responses from locations within the Northeast and West to skew negatively, but responses from Southern regions to be more positive, as per recent presidential satisfaction polls.</p>	

<h2>Data</h2>
<p>Our data will be collected from Twitter’s developer API. We will gather responses (retweets, replies, tweets at Trump) to Trump’s tweets. Our data will consist of the message body of the tweet, as well metadata like timestamp, tweet ID and location of tweeter. Then we will run sentiment analysis on each these tweets to get positivity and negativity score of them.
	At this point, we have written code the extract data from Twitter’s API. We are finalizing the specific parameters on which we wish to select the data (time, user, location, etc.), but we currently have a versatile framework that will allow use to easily get the data once our parameters have been chosen. We must decide the specific tweets with which to train our Twitter Bot, and will capture data in response to these tweet within 4 hours after they went live. The Twitter API allows one to easily get data in response to a user based on a timestamp. The image below shows a sample of some data we have extracted from the Twitter API. It is a sample of data that simply shows responses to @realDonaldTrump over 20 minutes of tweeting.
<img src="trumpData.png">
</p>	

<h2>Visualization</h2>
<p>We plan to use D3 to create all of our visualizations. Our first visualization will be a line graph that plots Donald Trump’s favorability on Twitter over time. In our second visualization, we plan to use D3’s mapping functions to break down Donald Trump’s favorability by location. Our third visualization will be a bar graph that compares Trump’s favorability in different subjects, such as immigration, health care, and Russia. </p>	

<h2>Machine Learning</h2>
<p>To implement machine learning into our project, we intend to create a Twitter Bot that is trained on 4 hours worth of tweets responding to Donald Trump’s most recent tweet, based on its subject (immigration, foreign policy, etc.). Given positivity and sentiment from real user responses, the Twitter Bot will create its own tweet responding to Donald Trump. We’re limited by Twitter biases--for instance, if Twitter skews negatively or positively in opinion to Donald Trump. The Twitter Bot will represent the average and overall Twitter response, not the national response.</p>


<h2>Next Steps</h2>
<p>Now that we are able to gather data from Twitter’s API, we must decide which specific tweets we would like to gather data for. Once these tweet’s have been selected, we will gather the desired data within the 4 hour period following each of the chosen tweets. This data can then be used to train our Twitter Bot so it is able to respond to any new tweet that goes live.
<br>
Our data must also be organized so that we are able to create visualizations based on time, geographical location, or other parameters that we must finalize.
<br>
Once our Twitter Bot is appropriately trained, we may plan to configure it such that it can gather and analyze data in order to respond to a user (@realDonaldTrump). 
<br>
Overview of next steps:
<ul>
<li>Select tweets and gather/clean desired data</li>
<li>Use data to train our Twitter Bot</li>
<li>Create visualization/organize results to show responses based on geographical location, time, or in comparison to another Twitter user
</li>
<li>Set up Twitter Bot so it is able to respond in real-time</li>
<li>Potentially generalize Twitter Bot so it is able to respond to any popular Twitter user
</li>
</ul>
</p>

<h1>Blog Post II</h1>

<p>
At this point in our project, we’ve spent some time getting closer to a final project proposal, and nailing down some of the details of our project. The Twitter API is more difficult than we initially anticipated, in that gathering data by location or time period is difficult (if not impossible). As a result, our initial goals of mapping positive and negative tweets across the country and evaluating responses to Trump’s individual tweets aren’t going to be quite feasible. What we can do instead is get data day-by-day, and do sentiment analysis over that unit of time. Our plan is to gather the full list of tweets at Donald Trump’s @realdonaldtrump account for each day of April. Equipped with this data, we can both run sentiment analysis on the tweet (to get an average positivity/negativity score for the day) and label each tweet with a keyword. That way, we can evaluate positivity/negativity scores for certain issues based on certain keywords. Tweets that are about immigration, for example, will be grouped together so we can get a Twitter approval rating of Trump’s immigration policies. 
</p>
<p>
We have collected this Twitter data for the week of March 13th to 20th and analyzed it using sentiment analysis. We visualized this analysis using D3 in the following graph, which was included in our midterm report. The graph indicates the average sentiment values for positive and negative tweets by day. As summarized in the report, we noticed that general local minima/maxima occurred on the same days. Additionally, positive tweets appeared to be more variable in sentiment values. Overall, Donald Trump received more positive than negative replies and retweets from March 13th through March 20th.   
</p>
<img src="sentimentAnalysis.png">

<p>For our first ML algorithm, we used a neural network to create a tweet given a keyword. Once we have collected the April twitter data, we will partition our data based on topic keywords, such as “immigration” and “policy”. For each topic, the tweets will be further partitioned into positive and negative sentiment. Within each of these categories, the tweets will be added into bigram dictionaries, with probabilities assigned to each bigram. At the end of this process, we will have a series of dictionaries, with each word hashed to a word that followed it in a tweet, as well as the number of times this occurred. We will choose a specific dictionary based on topic and sentiment score (positive/negative), and use the series of bigrams to construct the tweet. We currently have the framework for this algorithm, trained on one of Trump’s speeches and some of his tweets. As we collect the April data, we will retrain the algorithm using these tweets. The ML algorithm currently produces tweets such as:
<ul>
<li>“Our country and the united states will be a great again!”</li>
<li>“I am asking the united states to be great again”</li>
<li>“Now we will be a great again.”</li>
</ul>

In addition to these tweets, however, the ML algorithm produces some that are grammatically incorrect. The ML algorithm is, therefore, a good framework but clearly needs additional refinement and training. Eventually, we plan to make a Twitter bot that uses this ML algorithm to generate tweets in response to Donald Trump’s tweets based on the predicted sentiment of Twitter’s response to that subject. 
</p>
<p>We have not implemented our second machine learning algorithm yet, but we plan to make an ML algorithm that performs sentiment analysis. This ML algorithm would replace our current implementation, which uses a dictionary of words with sentiment scores that we found online. We calculate the overall sentiment of a tweet by totalling the sentiment scores of each word in the given tweet. We plan to use many of the tools we used in the ML lab because the lab also performed sentiment analysis on tweets. We’re also planning to  train our algorithm using the twitter data provided in the lab, which was given a polarity based on the positive and negative sentiment of the tweet using Sentiment140. We decided to use this data instead of scoring the tweets we collect ourselves because it would take too long to manually score enough tweets to train the algorithm with. In addition, we reasoned that the tweets in this dataset, given its size, were similar in language and in sentiment to the tweets we collected about Donald Trump. 
</p>

<p>With our first machine learning algorithm implemented and a plan laid out for a second one, we are feeling good about our progress so far, despite the setbacks with Twitter’s API. In the coming weeks, we plan to continue to collect data, implement our second ML algorithm, and work on our visualizations. 
</p>

<h1>Blog Post III</h1>

<p>At this point in our project, we’ve got a pretty good handle on our data. We’re gathering it as we go, since we’re trying to gather data for the full month of April. We did this because the Twitter API doesn’t store twitter data that’s more than a week old. Thus in order to get a month’s worth of data, one needs to gather data multiple times throughout the month, which is fairly easy to do. We also run sentiment analysis on each tweet we gather and score that tweet positively or negatively. As we mentioned in our previous blog post, that gives us the ability to get a positivity/negativity score for a given day. </p>

<p>Recall that we’re gathering tweets for a four hour period after one of Trump’s tweets each day. The next goal that we have is to group each tweet we gather by issue, and compare it to the tweet of Trump’s after which it was gathered. We’ve started by labelling each of Trump’s tweets by its issue. After that, we want to label the tweets gathered in the four hours after Trump’s. We’re in the process of writing a machine learning algorithm that will look at each tweet and grab its keywords to label it by its issue. The first goal is to compare each tweet’s label to the label of Trump’s tweet from which this tweet was gathered, and see how they compare. Perhaps, when Trump tweets about something, people respond to him about something similar. Or maybe, no one really cares what Trump’s tweeting about, and just wants to say things to/about him.</p>

<p>Combining this with our sentiment analysis data, we’ll be able to score positivity and negativity towards certain issues over time by the twitter user base. We’ll be able to create visualizations that allow the user to see how people have changed their discussion of issues over the month of April as actual events in the world occur. 
</p>
<p>At this point, we have code that gathers the data and a visualization. We also have code to conduct the sentiment analysis, although we think we might create our own training set from some of the tweets we’ve received to get better results from our sentiment analysis. We’ve also created a reply-bot based off of neural networks that can reply to Donald Trump using the positivity and negativity scores. The bot creates a new tweet that analyzes common bigrams and trigrams to write text that’s similar sentiment-wise. Here are some fun examples:
<ul>
<li>“hi good morning please resign nice sentiment though”</li>
<li>“ding ding wrong”</li>
<li>“great the american people are killed in your mouth you draft dodged 5 times so stfu”</li>
</ul>
One issue is that this really only has a ⅕ chance of working. A lot of times, the bot comes up with a tweet that doesn’t really make a ton of sense. Still, a 20% success rate isn’t bad. We’re going to spend some time over the next week trying to refine it to be more effective and helpful. Our next steps also include writing a program to label different tweets based on their issues. 
</p>

<p>At this point, we have one visualization that plots the sentiment scores of the positive and negative tweets over time as a line graph. We included this visualization in our last blog post. For our second visualization, we plan to use D3 to make a scatter plot of sentiment scores for specific topics, such as immigration, Syria, and the supreme court. The scatter plot will be similar to the one we created in D3 assignment for visualizing the Health and Wealth of Nations. Each circle on the graph will represent one policy topic and its size will correspond to the number of tweets in response to Donald Trump’s about that specific topic. The circle’s x-coordinate will be based on the number of positive responses and its y-coordinate will be based on the number of negative response. The circle will be filled in with a color scale based on the overall sentiment for that topic. A circle, for example, with a dark red fill would represent a topic with a strong negative response. In addition, there would be a slider on the bottom that you could use to change the date being displayed. This would allow you to track how Twitter’s response to specific topics has changed over time. </p>

<p>In addition to the scatterplot, we plan to make a third visualization that highlights the most popular words used in tweets responding to Donald Trump.  For our data for the first day of April, for example, the most common words tweeted at Trump were:
<ol>
	<li>Trump - 7382</li>
	<li>president - 7130</li>
	<li>people - 6696</li>
	<li>fake - 4444</li>
	<li>Russia - 3316</li>
	<li>day - 3286</li>
	<li>April - 3025</li>
	<li>stop - 2938</li>
	<li>Obama - 2928</li>
	<li>time - 2916</li>
	<li>sad - 2871</li>
	<li>American - 2861</li>
	<li>fools - 2856</li>
	<li>media - 2828</li>
	<li>stand - 2664</li>
	<li>Fox - 2655</li>
	<li>agents - 2644</li>
	<li>Donald - 2348</li>
	<li>news - 2319</li>
	<li>termination - 2289</li>
	<li>Russian - 2273</li>
	<li>represent - 2262</li>
	<li>notice - 2262</li>
	<li>serving - 2261</li>
	<li>America - 2147</li>
	<li>tweet - 2106</li>
	<li>dear - 2085</li>
	<li>manufacturing - 2023</li>
	<li>resign - 2006</li>
	<li>Flynn - 1988</li>
</ol>
</p>

<h1>Blog Post IV</h1>
<p>At this point in our project, we’re set on our data. We’re gathering it as we go, since we’re trying to gather data for the full month of April. We did this because the Twitter API doesn’t store twitter data that’s more than a week old. Thus in order to get a month’s worth of data, one needs to gather data multiple times throughout the month, which is fairly easy to do. As a result, we haven’t gathered all of our data yet, but we’ll have it all gathered by the end of May.</p>
<br>
<p>We also run sentiment analysis on each tweet we gather and score that tweet positively or negatively. We were running into some serious problems with our sentiment analysis, but we’ve figured them out for the most part. Twitter data, in particular, is difficult to run sentiment analysis on, just because sarcasm is so widespread. The sentiment of individual words is less representative of the sentiment of the overall tweet than might be true of your average English sentence. Our sentiment analysis was previously putting Trump’s Twitter approval rating (the proportion of tweets @realDonaldTrump that are positive vs. negative) at around 60%. Even a casual glance over the data we gathered suggests that his approval rating on Twitter isn’t even close to that. We’ve corrected how we are conducting our machine learning, and are now getting much more believable results.</p>
<br>
<p>As we mentioned in our previous blog post, that gives us the ability to get a positivity/negativity score for a given day. For our first visualization, we plan to use D3 to make a scatter plot of sentiment scores for specific topics, such as immigration, Syria, and the supreme court. The scatter plot will be similar to the one we created in D3 assignment for visualizing the Health and Wealth of Nations. Each circle on the graph will represent one policy topic and its size will correspond to the number of tweets in response to Donald Trump’s about that specific topic. The circle’s y-coordinate will be based on the number of positive responses to that issue. The circle’s x-coordinate, on the other hand, will be the relevance of that issue on the day that the tweet was made, as measured by the number of New York Times articles about that issue on that day. The circle will be filled in with a color scale based on the overall sentiment for that topic. A circle, for example, with a dark red fill would represent a topic with a strong negative response. In addition, there would be a slider on the bottom that you could use to change the date being displayed. This would allow you to track how Twitter’s response to specific topics has changed over time. </p>

<br>
<p>Our other visualization is a series of line charts that describe the most tweeted-about issue day-by-day. We’ve got tweets @realDonaldTrump for every day of April (or we will), and we’ll be able to see which topics were most popular to be tweeted about on each day. The X-axis will be the day in question, while the Y-Axis is the popularity of the topic compared to others. Remember that the twitter data gathered for each day were gathered for a period of 4 hours AFTER @realDonaldTrump tweeted, so we can compare the most popular topics in response to Trump to the tweet that he actually made just before.</p>

<br>
<p>In addition to these visualizations, we created a bump chart of the most popular words used in tweets responding to Donald Trump. The visualization, shown below, plots the ten most used words over the month of April. Underneath the Y-axis there is a slider where you can change the dates being displayed to see a different week. If you hover over any of the plotted lines, a tooltip appears to display the word with that rank. </p>

<br>
<p>The other two critical parts of our project are machine learning algorithms. The first is necessary for the above visualization to work -- we need to actually gather the topic data! We need to be able to classify tweets by topic. We’ve got a machine learning algorithm that currently works on a training set that we made, and properly assigns a label (topic) to a tweet it is given.</p>
<br>
<p>The other machine learning algorithm we’ve got is a Twitter-bot based off of neural networks , that can take in a set of tweets and training data and create a response to Trump using the overall sentiment of the input Twitter data. The bot creates a new tweet that analyzes common bigrams and trigrams to write text that’s similar sentiment-wise. If most people today are tweeting negatively towards Trump, the Twitter-bot also tweets negatively, using many of the most popular words and phrases of the day.</p>
<p id="chart"></p>
<script type="text/javascript" src="names1.js"></script>
<br>
<br>
<p>	The other two critical parts of our project are machine learning algorithms. The first is necessary for the above visualization to work -- we need to actually gather the topic data! We need to be able to classify tweets by topic. We’ve got a machine learning algorithm that currently works on a training set that we made, and properly assigns a label (topic) to a tweet it is given.</p>
<br>
<p>The other machine learning algorithm we’ve got is a Twitter-bot based off of neural networks , that can take in a set of tweets and training data and create a response to Trump using the overall sentiment of the input Twitter data. The bot creates a new tweet that analyzes common bigrams and trigrams to write text that’s similar sentiment-wise. If most people today are tweeting negatively towards Trump, the Twitter-bot also tweets negatively, using many of the most popular words and phrases of the day.</p>
<div id="sentimentTopic"></div>
<script type="text/javascript" src="nations.js"></script>
<p>Our project collected data from Twitter to analyze @realDonaldTrump’s influence and likeability, and experimented with the reproducibility of retweets after a Trump tweet. To accomplish this, we collected four hours worth of retweet data throughout the month of April every day that Trump tweeted. We ran sentiment analysis and topic modeling machine learning algorithms on the cleaned tweet data to find counts of positive/negative tweets each day, as well as the counts of tweets per topic. Additionally, we trained a neural-network sequence modeling algorithm on this data to prepare it for sentence creation. </p>

<br>
<br>

<br>
<br>
<p>Using the counts from topic modeling, we ran permutation tests to see whether people were more or less likely to tweet about the same topic that Donald Trump tweeted about that day. In line with our hypothesis, we found that this was true: with a confidence interval of 98%, we found that Tweeters were more likely to tweet about the same topic as the one they were responding to. This suggests that Twitter users are not sending retweets at random, but are creating specific replies to the Trump tweet. Additionally, our sentiment analysis shows an average approval rating of around 23%, considerably lower than the 40% approval rating of general polling across America. This provides some insight into the general opinions and political leanings of Twitter, which is often frequented by users that are younger and more liberal than typical American voters. Our neural-network based TweetBot also produced a variety of tweets informed by the retweets of the day, such as “hi good morning please resign nice sentiment though” and the hilarious, “DING DING WRONG”.</p>
<div id="topWords"></div>
<script type="text/javascript" src="bundle.js"></script>
</body>
</html>